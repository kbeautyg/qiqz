# README

## Платежный сервис для бизнеса с конвертацией в USDT

Веб-приложение с квизом для квалификации клиентов и формой захвата контактов с поддержкой промокодов и UTM-меток.

## Установка

1. Установите зависимости:
```bash
npm install
```

2. Создайте файл `.env` на основе `.env.example` и заполните необходимые переменные:
```bash
cp .env.example .env
```

3. Настройте Telegram бота:
   - Создайте бота через @BotFather в Telegram
   - Получите токен бота
   - Получите Chat ID (можно через @userinfobot)
   - Укажите их в `.env` файле

## Запуск

Запуск в режиме разработки (фронтенд + бэкенд):
```bash
npm run dev
```

Фронтенд будет доступен на http://localhost:3000
Бэкенд будет доступен на http://localhost:3001

## Структура проекта

```
├── src/                    # Фронтенд (React + TypeScript)
│   ├── components/         # React компоненты
│   │   ├── Quiz.tsx        # Компонент квиза
│   │   ├── ContactForm.tsx # Форма захвата контактов
│   │   └── Layout.tsx      # Общий layout
│   ├── pages/              # Страницы
│   │   ├── HomePage.tsx    # Главная страница
│   │   ├── QuizPage.tsx    # Страница квиза
│   │   └── ContactsPage.tsx # Страница контактов
│   └── ...
├── server/                 # Бэкенд (Node.js + Express)
│   ├── routes/            # API роуты
│   │   ├── quiz.ts        # Роут для квиза
│   │   └── contact.ts     # Роут для формы контактов
│   ├── services/          # Сервисы
│   │   ├── telegram.ts   # Отправка уведомлений в Telegram
│   │   └── database.ts   # Сохранение данных (можно расширить для реальной БД)
│   └── index.ts          # Точка входа сервера
└── ...
```

## Функционал

### Квиз-опрос
- 5 шагов с прогресс-баром
- Вопросы:
  1. Приветственный экран
  2. Сфера бизнеса
  3. Текущий способ приема платежей
  4. Ежемесячный оборот
  5. Контакты
- Валидация на каждом шаге
- Отправка данных на сервер

### Форма захвата контактов
- Поля: Имя, Телефон, Промокод (опционально)
- Автоматическое чтение промокода из URL параметра `?promo=agent_ivanov`
- Поддержка UTM-меток (utm_source, utm_medium, utm_campaign)
- Валидация номера телефона
- Автоматическое форматирование телефона

### API Endpoints

- `POST /api/quiz` - Отправка данных квиза
- `POST /api/contact` - Отправка данных формы контактов
- `GET /api/health` - Проверка работоспособности сервера

## Интеграция с CRM

В файле `server/services/database.ts` есть заготовки для интеграции с:
- AmoCRM
- Bitrix24

Раскомментируйте и настройте нужную интеграцию.

## Развертывание

Для продакшена:
1. Соберите фронтенд: `npm run build`
2. Настройте переменные окружения в `.env`
3. Запустите сервер: `node server/index.js` (или используйте PM2)

## Использование промокодов

Для передачи промокода через URL:
```
https://yourdomain.com/?promo=agent_ivanov
```

Форма автоматически подхватит промокод из URL.

